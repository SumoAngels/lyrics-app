<!DOCTYPE html>
<html lang="ru" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ú—É–∑—ã–∫–∞ –∏ –õ–∏—Ä–∏–∫–∞</title>

  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&family=Poppins:wght@300;500&display=swap"
    rel="stylesheet"
  />

  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="glass-container">
    <button id="theme-toggle" class="theme-button">üåô</button>

    <!-- –õ–∏—Ä–∏–∫–∞ -->
    <div class="lyrics-container" id="lyrics-box">
      <div id="lyrics"></div>
    </div>

    <!-- –ê—É–¥–∏–æ–ø–ª–µ–µ—Ä -->
    <div class="audio-player">
      <button id="play-btn" class="play-button">
        <svg id="icon-play" viewBox="0 0 24 24" width="28" height="28"><path d="M8 5v14l11-7z"/></svg>
        <svg id="icon-pause" viewBox="0 0 24 24" width="28" height="28" style="display:none"><path d="M6 19h4V5H6zm8-14v14h4V5z"/></svg>
      </button>

      <div class="progress-container" id="progress-container">
        <div class="progress" id="progress"></div>
      </div>
      <div class="time" id="time">0:00 / 0:00</div>
    </div>

    <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –ø–µ—Å–µ–Ω -->
    <div class="song-selector">
      <button class="song-btn active" data-song="1">–ü–µ—Å–Ω—è 1</button>
      <button class="song-btn" data-song="2">–ü–µ—Å–Ω—è 2</button>
    </div>

    <audio id="audio"></audio>
  </div>

  <script src="script.js"></script>
  <script>
// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è IP –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
async function logVisit() {
  try {
    // –ü–æ–ª—É—á–∞–µ–º IP
    const res = await fetch("https://api.ipify.org?format=json");
    const data = await res.json();
    const ip = data.ip;

    // –°–æ–∑–¥–∞—ë–º –∑–∞–ø–∏—Å—å –ª–æ–≥–∞
    const log = {
      time: new Date().toISOString(),
      ip: ip
    };

    // –ü–æ–ª—É—á–∞–µ–º —Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏ –∏–∑ localStorage
    let logs = JSON.parse(localStorage.getItem("logs") || "[]");
    logs.push(log);
    localStorage.setItem("logs", JSON.stringify(logs));

    console.log("–õ–æ–≥ —Å–æ—Ö—Ä–∞–Ω—ë–Ω:", log);
  } catch (err) {
    console.error("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å IP:", err);
  }
}

// –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –ª–æ–≥–æ–≤ –Ω–∞ –ü–ö
function downloadLogs() {
  const logs = JSON.parse(localStorage.getItem("logs") || "[]");
  if (!logs.length) return alert("–õ–æ–≥–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç.");

  const blob = new Blob([JSON.stringify(logs, null, 2)], { type: "application/json" });
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "logs.json";
  a.click();
  URL.revokeObjectURL(url);
}

// –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É "–°–∫–∞—á–∞—Ç—å –ª–æ–≥–∏"
const downloadBtn = document.createElement("button");
downloadBtn.textContent = "–°–∫–∞—á–∞—Ç—å –ª–æ–≥–∏";
downloadBtn.style.position = "fixed";
downloadBtn.style.bottom = "20px";
downloadBtn.style.right = "20px";
downloadBtn.style.padding = "10px 15px";
downloadBtn.style.background = "#ff6a00";
downloadBtn.style.color = "#fff";
downloadBtn.style.border = "none";
downloadBtn.style.borderRadius = "10px";
downloadBtn.style.cursor = "pointer";
downloadBtn.onclick = downloadLogs;
document.body.appendChild(downloadBtn);

// –õ–æ–≥–∏—Ä—É–µ–º —Ç–µ–∫—É—â–∏–π –≤–∏–∑–∏—Ç
logVisit();
</script>

</body>
</html>


